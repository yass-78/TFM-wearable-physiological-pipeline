# Wearable Physiological Processing Pipeline (TFM)

This repository contains the complete data processing pipeline developed for a Master’s Thesis (TFM) focused on the harmonization, preprocessing, and feature extraction of physiological signals acquired from wearable devices, specifically **Empatica E4** and **Empatica Embrace Plus**.

The pipeline addresses methodological challenges derived from differences in data architecture, temporal fragmentation, and signal formatting between both devices, enabling the reuse of consolidated analytical tools such as **FLIRT**.

## Repository Structure

The pipeline is organized into sequential processing stages, each implemented as an independent notebook:

```text
TFM-wearable-physiological-pipeline/
├── Leer y guardar/
│   ├── Leer_archivos_avro.ipynb
│   └── guardar_csv_embrace.ipynb
│
├── Emparejamiento/
│   └── emparejar_embrace_empatica.ipynb
│
├── Preprocesamiento/
│   └── preprocesamiento.ipynb
│
├── On Off Body/
│   └── Alg OnOffBody.ipynb
│
├── Van Hees/
│   └── Alg Van Hees.ipynb
│
├── FLIRT/
│   └── aplicacion mask + flirt.ipynb
│
└── README.md
```text

Each folder corresponds to a specific methodological stage of the pipeline.

## Pipeline Description

### 1. Leer y guardar

Purpose:
Ingestion and conversion of raw Empatica Embrace Plus data.

Description:
Raw AVRO files generated by the Embrace Plus are read, decoded, and converted into structured CSV files. This step reconstructs timestamps and prepares the data for further processing.

### 2. Emparejamiento

Purpose:
Subject-level pairing between Empatica E4 and Embrace Plus recordings.

Description:
This step establishes correspondence between datasets acquired from both devices, enabling comparative and longitudinal analyses.

### 3. Preprocesamiento

Purpose:
Signal reconstruction and normalization.

Description:
Physiological signals (EDA, ACC, IBI) are temporally reconstructed, cleaned, normalized, and transformed into continuous time series compatible across devices.

### 4. On Off Body

Purpose:
Detection of valid wear-time segments.

Description:
An on/off-body detection algorithm based on accelerometry, temperature, and EDA is applied to exclude periods where the device was not worn.

### 5. Van Hees

Purpose:
Detection of inactivity and stable segments.

Description:
A Van Hees–based algorithm is used to identify sustained inactivity periods, providing an additional quality-control layer and enabling the selection of physiologically stable segments.

### 6. FLIRT

Purpose:
Final signal preparation and feature extraction.

Description:
Combined masks (on/off-body + Van Hees) are applied, optimal continuous segments are selected, and signals are formatted to meet FLIRT input requirements. Physiological features are then extracted from EDA, ACC, and IBI signals.

### Intended Use

This repository is intended for researchers working with wearable physiological data who require:
	•	Interoperability between heterogeneous devices
	•	Continuity with previously validated analysis pipelines
	•	Transparent and reproducible preprocessing workflows
